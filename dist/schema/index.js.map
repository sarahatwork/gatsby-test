{"version":3,"sources":["../../src/schema/index.js"],"names":["_","require","GraphQLSchema","GraphQLObjectType","buildNodeTypes","buildNodeConnections","store","invariant","module","exports","typesGQL","connections","values","nodes","mapValues","isEmpty","schema","query","name","fields","dispatch","type","payload"],"mappings":";;;;;;;;;;;;AACA,MAAMA,IAAIC,QAAS,QAAT,CAAV;AACA,MAAM,EAAEC,aAAF,EAAiBC,iBAAjB,KAAuCF,QAAS,SAAT,CAA7C;;AAEA,MAAMG,iBAAiBH,QAAS,oBAAT,CAAvB;AACA,MAAMI,uBAAuBJ,QAAS,0BAAT,CAA7B;AACA,MAAM,EAAEK,KAAF,KAAYL,QAAS,UAAT,CAAlB;AACA,MAAMM,YAAYN,QAAS,WAAT,CAAlB;;AAEAO,OAAOC,OAAP,mCAAiB,aAAY;AAC3B,QAAMC,WAAW,MAAMN,gBAAvB;AACA,QAAMO,cAAcN,qBAAqBL,EAAEY,MAAF,CAASF,QAAT,CAArB,CAApB;;AAEA;AACA,QAAMG,QAAQb,EAAEc,SAAF,CAAYJ,QAAZ,EAAuB,MAAvB,CAAd;;AAEAH,YAAU,CAACP,EAAEe,OAAF,CAAUF,KAAV,CAAX,EAA8B,kCAA9B;AACAN,YAAU,CAACP,EAAEe,OAAF,CAAUJ,WAAV,CAAX,EAAoC,wCAApC;;AAEA,QAAMK,SAAS,IAAId,aAAJ,CAAkB;AAC/Be,WAAO,IAAId,iBAAJ,CAAsB;AAC3Be,YAAO,eADoB;AAE3BC,yCAAaR,WAAb,EAA6BE,KAA7B;AAF2B,KAAtB;AADwB,GAAlB,CAAf;;AAOAP,QAAMc,QAAN,CAAe;AACbC,UAAO,YADM;AAEbC,aAASN;AAFI,GAAf;AAID,CArBD","file":"index.js","sourcesContent":["/* @flow */\nconst _ = require(`lodash`)\nconst { GraphQLSchema, GraphQLObjectType } = require(`graphql`)\n\nconst buildNodeTypes = require(`./build-node-types`)\nconst buildNodeConnections = require(`./build-node-connections`)\nconst { store } = require(`../redux`)\nconst invariant = require(`invariant`)\n\nmodule.exports = async () => {\n  const typesGQL = await buildNodeTypes()\n  const connections = buildNodeConnections(_.values(typesGQL))\n\n  // Pull off just the graphql node from each type object.\n  const nodes = _.mapValues(typesGQL, `node`)\n\n  invariant(!_.isEmpty(nodes), `There are no available GQL nodes`)\n  invariant(!_.isEmpty(connections), `There are no available GQL connections`)\n\n  const schema = new GraphQLSchema({\n    query: new GraphQLObjectType({\n      name: `RootQueryType`,\n      fields: { ...connections, ...nodes },\n    }),\n  })\n\n  store.dispatch({\n    type: `SET_SCHEMA`,\n    payload: schema,\n  })\n}\n"]}